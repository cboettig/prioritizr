% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/eval_rwr_importance.R
\name{eval_rwr_importance}
\alias{eval_rwr_importance}
\alias{eval_rwr_importance,ConservationProblem,numeric-method}
\alias{eval_rwr_importance,ConservationProblem,matrix-method}
\alias{eval_rwr_importance,ConservationProblem,data.frame-method}
\alias{eval_rwr_importance,ConservationProblem,Spatial-method}
\alias{eval_rwr_importance,ConservationProblem,sf-method}
\alias{eval_rwr_importance,ConservationProblem,Raster-method}
\title{Evaluate solution importance using rarity weighted richness scores}
\usage{
eval_rwr_importance(x, solution, ...)

\S4method{eval_rwr_importance}{ConservationProblem,numeric}(x, solution, rescale, ...)

\S4method{eval_rwr_importance}{ConservationProblem,matrix}(x, solution, rescale, ...)

\S4method{eval_rwr_importance}{ConservationProblem,data.frame}(x, solution, rescale, ...)

\S4method{eval_rwr_importance}{ConservationProblem,Spatial}(x, solution, rescale, ...)

\S4method{eval_rwr_importance}{ConservationProblem,sf}(x, solution, rescale, ...)

\S4method{eval_rwr_importance}{ConservationProblem,Raster}(x, solution, rescale, ...)
}
\arguments{
\item{x}{\code{\link[=problem]{problem()}} (i.e. \code{\linkS4class{ConservationProblem}}) object.}

\item{solution}{\code{numeric}, \code{matrix}, \code{data.frame},
\code{\linkS4class{Raster}}, \code{\linkS4class{Spatial}},
or \code{\link[sf:sf]{sf::sf()}} object.
The argument should be in the same format as the planning unit cost
data in the argument to \code{x}.
See the Solution format section for more information.}

\item{...}{not used.}

\item{rescale}{\code{logical} flag indicating if replacement cost
values---excepting infinite (\code{Inf}) and zero values---should be
rescaled to range between 0.01 and 1. Defaults to \code{TRUE}.}
}
\value{
A \code{numeric}, \code{matrix}, \code{data.frame}
\code{\linkS4class{RasterLayer}}, \code{\linkS4class{Spatial}},
or \code{\link[sf:sf]{sf::sf()}} object containing the importance scores for each planning
unit in the solution. Specifically, the returned object is in the
same format as the planning unit data in the argument to \code{x}.
}
\description{
Calculate importance scores for planning units selected in a solution
using rarity weighted richness scores (based on Williams \emph{et al.} 1996).
This method is only recommended for large-scaled conservation
planning exercises (i.e. more than 100,000 planning units) where
importance scores cannot be calculated using other methods in a feasible
period of time. This is because rarity weighted richness scores cannot (i)
account for the cost of different planning units, (ii) account for multiple
management zones, and (iii) identify truly irreplaceable planning units---
unlike the replacement cost metric which does not suffer any of these
limitations.
}
\details{
Rarity weighted richness scores are calculated using the following
terms. Let \eqn{I} denote the set of planning units (indexed by
\eqn{i}), let \eqn{J} denote the set of conservation features (indexed by
\eqn{j}), let \eqn{r_{ij}} denote the amount of feature \eqn{j}
associated with planning unit \eqn{i}, and let \eqn{M_j} denote the
maximum value of feature \eqn{j} in \eqn{r_{ij}} in all planning units
\eqn{i \in I}. To calculate the rarity weighted richness (\emph{RWR}) for
planning unit \eqn{k}:

\deqn{
  \mathit{RWR}_{k} = \sum_{j}^{J} \frac{ \frac{r_{kj}}{M_j} }{
                                          \sum_{i}^{I} r_{ij}}
  }{
  RWRk = sum_j^J ( (rkj / Mj) / sum_i^I rij)
  }
}
\section{Solution format}{

The argument to \code{solution} must be in the same format as
the planning unit data in the argument to \code{x}
(e.g. in terms of data representation, dimensionality, and spatial
attributes).
For example, if the planning unit data in \code{x} is a \code{numeric}
vector, then the argument to \code{solution} must be a \code{numeric} vector
with the same number of elements.
Similarly, if the planning units in \code{x} are a \code{data.frame}, then the
argument to \code{solution} must also be a \code{data.frame} with each
column corresponding to a different zone, each row corresponding to a
different planning unit, and cell values corresponding to the solution value.
Additionally, if the planning unit data in \code{x} is
a \code{\linkS4class{Raster}} object, then the argument to
\code{solution} must also be a \code{\linkS4class{Raster}} object with
the same dimensionality (rows and columns), resolution, extent, and
coordinate reference system.
Furthermore, if the planning unit data in \code{x} is a
\code{\linkS4class{Spatial}} or \code{\link[sf:sf]{sf::sf()}} object then the
argument to \code{solution} must also be a \code{\linkS4class{Spatial}}
or \code{\link[sf:sf]{sf::sf()}} object (respectively) with the same spatial information
(e.g. polygons and coordinate reference system), and contain columns
corresponding to different zones, and cell values corresponding to the
solution values.

The argument to \code{solution} must also have missing (\code{NA}) values for planning
units that have missing (\code{NA}) cost values.
In other words, the solution must have missing (\code{NA}) values in the
same elements, cells, or pixels (depending on the cost data format) as the
planning unit cost data.
For example, if the planning unit data are a \code{\linkS4class{Raster}} object,
then the argument to \code{solution} must have missing (\code{NA}) values in
the same pixels as the planning unit cost data.
Similarly, if the planning unit data are a
\code{\linkS4class{Spatial}}, \code{\link[sf:sf]{sf::sf()}}, or \code{data.frame} object, then
the solution must have missing (\code{NA}) values in the same cells
as the planning unit cost data columns.
If an argument is supplied to \code{solution} where
the missing (\code{NA}) values in the argument to solution do not match
those in the planning unit cost data, then an error will be thrown.
}

\examples{
# seed seed for reproducibility
set.seed(600)

# load data
data(sim_pu_raster, sim_features)

# create minimal problem with binary decisions
p1 <- problem(sim_pu_raster, sim_features) \%>\%
      add_min_set_objective() \%>\%
      add_relative_targets(0.1) \%>\%
      add_binary_decisions() \%>\%
      add_default_solver(gap = 0, verbose = FALSE)
\dontrun{
# solve problem
s1 <- solve(p1)

# print solution
print(s1)

# plot solution
plot(s1, main = "solution", axes = FALSE, box = FALSE)

# calculate importance scores
rwr1 <- eval_rwr_importance(p1, s1)

# print importance scores
print(rwr1)

# plot importance scores
plot(rwr1, main = "rarity weighted richness", axes = FALSE, box = FALSE)
}

}
\references{
Williams P, Gibbons D, Margules C, Rebelo A, Humphries C, and Pressey RL
(1996) A comparison of richness hotspots, rarity hotspots and complementary
areas for conserving diversity using British birds.
\emph{Conservation Biology}, 10: 155--174.
}
\seealso{
\link{importance}.
}
