% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/eval_ferrier_importance.R
\name{eval_ferrier_importance}
\alias{eval_ferrier_importance}
\alias{eval_ferrier_importance,ConservationProblem,numeric-method}
\alias{eval_ferrier_importance,ConservationProblem,matrix-method}
\alias{eval_ferrier_importance,ConservationProblem,data.frame-method}
\alias{eval_ferrier_importance,ConservationProblem,Spatial-method}
\alias{eval_ferrier_importance,ConservationProblem,Raster-method}
\title{Evaluate solution importance using Ferrier scores}
\usage{
eval_ferrier_importance(x, solution)

\S4method{eval_ferrier_importance}{ConservationProblem,numeric}(x, solution)

\S4method{eval_ferrier_importance}{ConservationProblem,matrix}(x, solution)

\S4method{eval_ferrier_importance}{ConservationProblem,data.frame}(x, solution)

\S4method{eval_ferrier_importance}{ConservationProblem,Spatial}(x, solution)

\S4method{eval_ferrier_importance}{ConservationProblem,Raster}(x, solution)
}
\arguments{
\item{x}{\code{\link[=problem]{problem()}} (i.e. \code{\linkS4class{ConservationProblem}}) object.}

\item{solution}{\code{numeric}, \code{matrix}, \code{data.frame},
\code{\linkS4class{Raster}}, \code{\linkS4class{Spatial}},
or \code{\link[sf:sf]{sf::sf()}} object.
The argument should be in the same format as the planning unit cost
data in the argument to \code{x}.
See the Solution format section for more information.}
}
\value{
A \code{matrix}, \code{\link[tibble:tibble]{tibble::tibble()}},
\code{\linkS4class{RasterLayer}}, or
\code{\linkS4class{Spatial}} object containing the scores for each
planning unit selected in the solution.
Specifically, the returned object is in the
same format (except if the planning units are a \code{numeric} vector) as the
planning unit data in the argument to \code{x}.
}
\description{
Calculate importance scores for planning units selected in
a solution following Ferrier \emph{et al.} (2000).
\strong{Please note that
the mathematical formulation for computing these scores needs verification,
and so this functionality should be considered experimental at this point in
time.}
}
\details{
Importance scores are reported separately for each feature within
each planning unit. Additionally, a total importance score is also
calculated as the sum of the scores for each feature.
Note that this function only works for problems with
a minimum set objective and a single zone.
It will throw an error for other types of problems that do not meet
this specification.
}
\section{Solution format}{

The argument to \code{solution} must be in the same format as
the planning unit data in the argument to \code{x}
(e.g. in terms of data representation, dimensionality, and spatial
attributes).
For example, if the planning unit data in \code{x} is a \code{numeric}
vector, then the argument to \code{solution} must be a \code{numeric} vector
with the same number of elements.
Similarly, if the planning units in \code{x} are a \code{data.frame}, then the
argument to \code{solution} must also be a \code{data.frame} with each
column corresponding to a different zone, each row corresponding to a
different planning unit, and cell values corresponding to the solution value.
Additionally, if the planning unit data in \code{x} is
a \code{\linkS4class{Raster}} object, then the argument to
\code{solution} must also be a \code{\linkS4class{Raster}} object with
the same dimensionality (rows and columns), resolution, extent, and
coordinate reference system.
Furthermore, if the planning unit data in \code{x} is a
\code{\linkS4class{Spatial}} or \code{\link[sf:sf]{sf::sf()}} object then the
argument to \code{solution} must also be a \code{\linkS4class{Spatial}}
or \code{\link[sf:sf]{sf::sf()}} object (respectively) with the same spatial information
(e.g. polygons and coordinate reference system), and contain columns
corresponding to different zones, and cell values corresponding to the
solution values.

The argument to \code{solution} must also have missing (\code{NA}) values for planning
units that have missing (\code{NA}) cost values.
In other words, the solution must have missing (\code{NA}) values in the
same elements, cells, or pixels (depending on the cost data format) as the
planning unit cost data.
For example, if the planning unit data are a \code{\linkS4class{Raster}} object,
then the argument to \code{solution} must have missing (\code{NA}) values in
the same pixels as the planning unit cost data.
Similarly, if the planning unit data are a
\code{\linkS4class{Spatial}}, \code{\link[sf:sf]{sf::sf()}}, or \code{data.frame} object, then
the solution must have missing (\code{NA}) values in the same cells
as the planning unit cost data columns.
If an argument is supplied to \code{solution} where
the missing (\code{NA}) values in the argument to solution do not match
those in the planning unit cost data, then an error will be thrown.
}

\examples{
# seed seed for reproducibility
set.seed(600)

# load data
data(sim_pu_raster, sim_features)

# create minimal problem with binary decisions
p1 <- problem(sim_pu_raster, sim_features) \%>\%
      add_min_set_objective() \%>\%
      add_relative_targets(0.1) \%>\%
      add_binary_decisions() \%>\%
      add_default_solver(gap = 0, verbose = FALSE)
\dontrun{
# solve problem
s1 <- solve(p1)

# print solution
print(s1)

# plot solution
plot(s1, main = "solution", axes = FALSE, box = FALSE)

# calculate importance scores using Ferrier et al. 2000 method
fs1 <- eval_ferrier_importance(p1, s1)

# print importance scores,
# each planning unit has an importance score for each feature
# (as indicated by the column names) and each planning unit also
# has an overall total importance score (in the "total" column)
print(fs1)

# plot total importance scores
plot(fs1, axes = FALSE, box = FALSE)
}

}
\references{
Ferrier S, Pressey RL, and Barrett TW (2000) A new predictor of the
irreplaceability of areas for achieving a conservation goal, its application
to real-world planning, and a research agenda for further refinement.
\emph{Biological Conservation}, 93: 303--325.
}
\seealso{
\link{importance}.
}
